\documentclass[12pt,a4paper,titlepage]{article}
% \$Id: ulineno.tex,v 1.1 1998/03/20 11:58:35 stephan Exp $
\date{\def\$##1:##2 ${##2}%$
Version 
   \$Revision: 1.1 $, 
   \$Date: 1998/03/20 11:58:35 $
}
\def\lineno.sty{\texttt{\itshape lineno.sty}}


\title{                      \lineno.sty
\\                           Users Manual
}
\author{                 Stephan I. B\"ottcher
}

\usepackage{lineno}
\usepackage{numquote}
\usepackage{ilineno}
\usepackage{bframe}
\usepackage{url}

\def~{\verb~}
\catcode`\<\catcode`\~
\def<#1>{$\langle${\itshape#1}\/$\rangle$}
\catcode`\|\catcode`\~
\def|#1{{\ttfamily\string#1}}
\def\NL{<number>]}

\begin{document}
\maketitle
\tableofcontents
\clearpage

\section{When to use \lineno.sty}

The primary use of \lineno.sty is to get line numbers in your LaTeX
document.  \lineno.sty directly supports line numbers in various
modes, and if you have any wishes that are not directly supported,
chances are good that \lineno.sty can be adapted to do it.  And if it
turns out to be difficult with \lineno.sty, then is will be even more
difficult without.

There is one class of cases however, where \lineno.sty is not the most
appropriate tool.  When your text already comes in lines, like source
listings, tables, poetry,  then \lineno.sty will propably do the job,
but other tools could do it much more efficiently.

\lineno.sty can only number lines in the main text.  Lines in any kind
of boxes cannot be numbered.  But see section \ref{sec:ilineno} below.

\lineno.sty is especially useful when the text is broken into lines by
\TeX\ itself.  In this case, the task to attach line numbers is not
easy, and a tool like \lineno.sty has good chances to break when used
together with other packages.

On the other hand, \lineno.sty proved to be quite stable, and I did
not get any reports of complete failure yet.

With \lineno.sty, you can refer to the line numbers via \LaTeX s
~\ref~ and ~\pageref~ macros.

There are other applications, not directly related to line numbering.
Whenever you want to attach something to your text, after a paragraph
was broken into lines, across pagebreaks, lineno may do the job.

E.g., you need a frame around some text, but the text should be able
to break across pages, \lineno.sty could be used to draw rules on both
margins, which can be completed at the top and bottom by some special
environment. 

There may be cases, where other packages do a better job, e.g.,
\url{CTAN:macros/latex/contrib/supported/numline}.


\section{How to get \lineno.sty}

\lineno.sty is available on the \emph{Comprehensive TeX Archive
  Network} (CTAN), e.g, \url{ftp:// ftp.tex.ac.uk/ tex-archive/
  macros/ latex/ contrib/ supported/ lineno/ lineno.sty}.

The home of \lineno.sty is \url{http:// zufo.tau.ac.il/ ~stephan/ tex/
  LaTeX-styles.html #lineno}.  Here you can get the latest version.


\section{How to use \lineno.sty}

As any other \LaTeXe\ package, you need to load it with
\begin{quote}
   ~\usepackage[~<options>~]{lineno}~
\end{quote}

\subsection{Package options}

The available <options> are:
\begin{description}

\item[\texttt{[left]}:]  Put the line numbers into the left margin
  (default). 

\item[\texttt{[right]}:]  Put the line numbers into the right margin.

\item[\texttt{[switch]}:]  Put the line numbers into the outer margin
  (left on even numbered pager, right on odd numbered pages).

\item[\texttt{[switch*]}:]  Put the line numbers into the inner
  margin.

\item[\texttt{[pagewise]}:]  Number the lines starting with one at the
  top of each page.

\item[\texttt{[running]}:]  Continuously number the lines (default).

\item[\texttt{[modulo]}:]  Print line numbers only on lines which are
  multiples of five.

\item[\texttt{[displaymath]}:]  When using the ~{linenomath}~
  environment for display math, put line numbers also on the lines of
  the display.

\end{description}
All effects of these option can also be obtained by calling certain
macros later in the document.

\subsection{How to turn on line numbering}

The line numbering is not turned on by default.  If you want line
numbers, you have to turn it on.  The simples way is to say
\begin{quote}
    ~\linenumbers~
\end{quote}
This will turn on line numbers within the current group, according to
the currently selected mode.  If you do it right at the beginning, the
whole document will be numbered.

~\linenumbers~ is in effect only when a paragraph is finished.  This
is important if you use ~\linenumbers~ for a single paragraph only.
This will \emph{not} work:
\begin{quote}\obeylines
   ~\begingroup~\\%
   ~\linenumbers~
     Text of your paragraph.
   ~\endgroup~
\end{quote}
because the ~\emdgroup~ terminates the effect of ~\linenumbers~ before
the paragraph is finished.  The solution is to insert an empty line,
or an explicit ~\par~ before the ~\endgroup~.

However, the prefered solution is to use an enviroment:
\begin{quote}\obeylines
   ~\begin{linenumbers}~ 
     Text of your paragraph. 
   ~\end{linenumbers}~
\end{quote}
The ~\end{linenumbers}~ terminates the paragraph for you.  It will
also make sure that the next paragraph is not indented, if there is no
empty line in between.  

This form will not finish any preceeding paragraph.  If you do not
leave an empty line before the ~\begin{linenumbers}~, the previous
paragraph may also get line numbers (this is not true after a list
environment).

A quite esoteric form to number a single paragraph is:
\begin{quote}\obeylines
     Text of your paragraph.
     ~{\linenumbers\par}~
\end{quote}
Here, the ~\linenumbers~ is turned on in a group that just executes
the ~\par~ to terminate the previous paragraph.  Only this paragraph
will have line numbers. (~\par~ is exactly equivalent to an empty
line).


\subsection{How to turn off line numbering}

You do not usualy turn of line numbering explicitly, but rather
restrict line numbering to a group.  However, you can turn it off with
the cammand
\begin{quote}
   ~\nolinenumbers~
\end{quote}
This macro can also be used as an environment.  The same restrictions
apply as for ~\linenumbers~.


\section{Numbering modes}

There are two basic numbering modes
\begin{enumerate}

\item ~[running]~ line numbers.  The numbers run continuously along
  the document, without considering page breaks.  The line numbers can
  be reset, or preset at any point in the document (except within a
  paragraph).  Margin switching is not possible.

\item ~[pagewise]~ line numbers.  The lines on each page are numbered
  from one.  Margin switching is possible.  \emph{running} mode can be
  simulated in pagewise mode, to get margin switching with continuous
  line numbers, but without the ability to reset/preset the line
  numbers anywhere in the document.

\end{enumerate}

\begin{runninglinenumbers*}

\subsection{\emph{Running} line numbers}

This is the default mode of operation.  The lines of your text are
numbered continuously across page breaks.  

You cannot get margin switching in this mode, because at the time when
the line numbers are attached, it is not yet decided on which page the
line will end up.  However, you can simulate continuous line numbers in
\emph{pagewise} mode (see below), where margin switching becomes
possible. 

You get this mode by
\begin{itemize}\raggedright
\item \emph{not} specifying any of the package options
  ~[switch,pagewise]~,
\item specifying the package option ~[running]~,
\item give the command ~\setrunninglinenumbers~ in the document, or
\item turn on line numbering with ~\runninglinenumbers~ or
  ~\begin{runninglinenumbers}~. 
\end{itemize}

\subsubsection{Reseting or setting the line number}

You can reset the line number with
\begin{quote}
  ~\resetlinenumber[~<number>~]~
\end{quote}
where the default is to reset the line number to one.

Alternatively, you can give the line number in an optional argument to
any command that turns on the line numbering in this mode:
\begin{quote}\obeylines
  ~\linenumbers[~<number>~]~ 
  ~\runninglinenumbers[~<number>~]~ 
  ~\begin{linenumbers}[~<number>~]~
  ~\begin{runninglinenumbers}[~<number>~]~
\end{quote}
or reset the line number to one with any of the following:
\begin{quote}\obeylines
  ~\linenumbers*~ 
  ~\runninglinenumbers*~ 
  ~\begin{linenumbers*}~
  ~\begin{linenumbers}*~
  ~\begin{runninglinenumbers*}~
  ~\begin{runninglinenumbers}*~
\end{quote}
This section of the manual is enclosed in
\begin{quote}\obeylines
  ~\begin{runninglinenumbers*}~
  ~\end{runninglinenumbers*}~
\end{quote}
\end{runninglinenumbers*}


\begin{pagewiselinenumbers}

\subsection{\emph{pagewise} line numbers}

Basically, this mode prints line numbers starting with one on top of
each page, counting only lines where this mode is active.  If you
turn on this mode in the middle of a page, the numbers start with one
at that point.

The \emph{pagewise} mode of operation is quite a bit more work for
\TeX, and your computer.  When the line numbers are printed, \TeX\
does not know on which page the current line will go.  To get
\emph{pagewise} mode working, \LaTeX\ has to remember on which page the
line went in a previous run.  This information is written into the
~.aux~ file, and like a table of contents, you will not see the
numbers until you run \LaTeX\ at least twice on the document.
Sometimes the information in the ~.aux~ file becomes invalid in a way
that causes \lineno.sty to hang.  In such a case you'll have to delete
all ~.aux~ files of the document to get it going again.

You get this mode by
\begin{itemize}\raggedright
\item specifying the package option
  ~[pagewise]~, but not ~[running]~,
\item give the command ~\setpagewiselinenumbers~ in the document, or
\item turn on line numbering with ~\pagewiselinenumbers~ or
  ~\begin{pagewiselinenumbers}~. 
\end{itemize}

You cannot reset or preset the line numbers in \emph{pagewise} mode.
This mode uses a different counter than \emph{running} mode.  You can
switch between the mode, and the running numbers will continue where
they left of, unless you reset the counter.

\subsubsection{Margin switching}

As a side effect of all the business to find out on which page the lines
end up, margin switching becomes possible.  It is now possible to
print the line number differently on odd and even pages.  The command
\begin{quote}
  ~\switchlinenumbers~
\end{quote}
will cause the line numbers to be printed on the outer margins, on the
right side for odd pages, and on the left side for even numbered
pages.  If you add a star, the numbers go on the inner margins
\begin{quote}
  ~\switchlinenumbers*~
\end{quote}
You can achieve the same effect by specifying the package
option ~[switch]~ or ~[switch*]~ together with ~[pagewise]~. 

Margin switching is independent of any ~[twoside]~ option of the
document class.

\subsubsection{\emph{running} mode with margin switching}

Margin switching is not possible in \emph{running} mode, but you can
abuse the pagewise mode to produce continuous line numbers.  This mode
is activated with the command
\begin{quote}
  ~\runningpagewiselinenumbers~
\end{quote}
It is not possible to reset the line number counter for this mode, the
lines will be numbered starting from one at the beginning of the
document, and continue.  You can switch back to real pagewise mode with
\begin{quote}
  ~\realpagewiselinenumbers~
\end{quote}
but the \emph{running} numbers will not be continuously, but the count
will include all lines that were numbered \emph{pagewise}.

The package options ~[switch]~ and ~[switch*]~ will turn on
\emph{running pagewise} mode with margin switching, unless you also
specify ~[pagewise]~.

Finally, if you give these options together with ~[running]~, like
\begin{quote}
  ~\usepackage[switch,pagewise,running]{lineno}~
\end{quote}
the default mode is plain \emph{running} line numbers, but if you use
~\pagewiselinenumbers~ later in your document, the mode setings of the
~[switch]~ and ~[pagewise]~ options will take effect.

\end{pagewiselinenumbers}

\begin{linenumbers*}

\subsection{Margin selection}

In any mode you can select the margin on which the numbers shall be
printed.  You can either give a package option ~[left]~ or ~[right]~,
or change the margin within the document with
\begin{quote}\obeylines
  ~\leftlinenumbers~
\rightlinenumbers
  ~\rightlinenumbers~
\end{quote}
\rightlinenumbers
Neither of these commands actually turns on line numbering.  The
margin setting is changed for the currently selected mode
\emph{running} or \emph{pagewise}.  If you want to set the margin for
both modes, append a star
\begin{quote}\obeylines
  ~\leftlinenumbers*~
  ~\rightlinenumbers*~
\end{quote}
The default is ~\leftlinenumbers*~.

\end{linenumbers*}


\subsection{Summary of mode selection commands}

The following commands change the selection of the major line
numbering mode
\begin{description}
\item [|\setrunninglinenumbers] \leavevmode
\item [|\setpagewiselinenumbers] \leavevmode\\
  set the current mode, without activating or deactivating line
  numbering. 
\item [|\runninglinenumbers\texttt{*[\NL}] \leavevmode
\item [|\pagewiselinenumbers] \leavevmode\\
  set the current mode and activate line numbering, optionally reset
  (~*~), or set the line number for \emph{running} mode. 
\end{description}
The following commands do not change the major mode, but modify the
the behaviour of \emph{pagewise} mode
\begin{description}
\item [|\realpagewiselinenumbers] \leavevmode
\item [|\runningpagewiselinenumbers] \leavevmode\\
  select if \emph{pagewise} mode should number continuously, or really
  pagewise.
\end{description}


\subsection{Summary of margin selection commands}

The following command select into which margin the numbers should be
printed 
\begin{description}
\item [|\leftlinenumbers\texttt*] \leavevmode
\item [|\rightlinenumbers\texttt*] \leavevmode\\
  put the line numbers in the left/right margin in both modes.
\item [|\leftlinenumbers] \leavevmode
\item [|\rightlinenumbers] \leavevmode\\
  put the line number into the left/right margin in the currently
  selected mode.
\item [|\switchlinenumbers] \leavevmode\\
  put the line numbers into the outer margin, when using
  \emph{pagewise} mode.
\item [|\switchlinenumbers\texttt*] \leavevmode\\
  put the line numbers into the inner margin, when using
  \emph{pagewise} mode.
\end{description}

\begin{linenumbers*}
\modulolinenumbers[2]

\section{Numbering only one in five lines}

You can ask lineno to print the line numbers only if they devide by
<n>, by saying
\begin{quote}
  ~\modulolinenumbers[~<n>~]~
\end{quote}
If you omit the optional argument, the current value of the counter
~linenumbermodulo~ is used.  This counter is initialized to 5.  You
get the same effect by giving the package option ~[modulo]~. 

If you set <n> to 1, the counter value is not changed, but modulo
numbering is turned off.  

Only changing the counter ~linenumbermodulo~ does not turn on modulo
numbering, it just changes the module, if it is turned on.

This section of the manual is enclosed in
\begin{quote}
  ~\begin{linenumbers*}~ \\ 
  ~\modulolinenumbers[2]~

  ~\end{linenumbers*}~
\end{quote}

\end{linenumbers*}

\begin{pagewiselinenumbers}
\switchlinenumbers

\section{How the line numbers look like}

This section of the manual is enclosed in
\begin{quote}
 ~\begin{pagewiselinenumbers}~ \\
 ~\switchlinenumbers~

 ~\end{pagewiselinenumbers}~
\end{quote}
By default, the line numbers are set in
\begin{quote}
  ~\normalfont\tiny\sffamily~
\end{quote}
right justified to 10\,pt left of the nominal left edge of the text.
If the number is to appear on the right margin, it is right justified
to 20\,pt right of the nominal right edge of the text.

You can easily change that, of course.  The font is defined by the
macro
\begin{quote}
  ~\linenumberfont~
\end{quote}
You can redefine it to make the numbers appear in a differnt font
(with ~\renewcommand~).  I'll say right here in the manual
\renewcommand\linenumberfont{\normalfont\bfseries\small}
\begin{quote}
  ~\renewcommand\linenumberfont{\normalfont\bfseries\small}~
\end{quote}
The distance on the left margin can be changed with
\begin{quote}
  ~\setlength\linenumbersep{~<distance>~}~
\end{quote}
The distance on the right margin is ~\linenumbersep~ plus
~\linenumberwidth~, both are set to 10\,pt by default.
Let's do right here
\setlength\linenumbersep{1cm}
\begin{quote}
  ~\setlength\linenumbersep{1cm}~
\end{quote}
I put the command at the end of the paragraph, but it effect the whole
paragraph, because that is where everything happens: at the end of the
paragraphs.

The line numbers are printed as arabic numerals, as defined in the
macro
\begin{quote}
  ~\thelinenumber~
\end{quote}
for the \LaTeX\ counter ~{linenumber}~.  You can redefine that as
with any other \LaTeX\ counter.  E.g.,
\renewcommand\thelinenumber{\roman{linenumber}}
\begin{quote}
  ~\renewcommand\thelinenumber{\roman{linenumber}}~
\end{quote}
(For heavy duty line numbering, you should use \LaTeX s internal
format, e.g., ~\@roman\c@linenumber~.)

\subsection{Deeper customization}

The line number is attached to the line by the macro
\begin{quote}
  ~\makeLineNumber~
\end{quote}
which is expanded inside a zero width ~\hbox~ alligned to the
origin of the current line (left edge, baselines alligned).  You can
do anything in this macro.  Let's assume you do not want line numbers
at all, but just attach something else to each line of text: this is
the macro to modify.  You can refer to the line number by the macro
~\LineNumber~, which prints the current value of the counter
~{linenumber}~, or nothing if \emph{modulo} mode is active, and the
number does not divide by ~{linenumbermodulo}~.  You should not modify
this macro when using any form of \emph{pagewise} mode.  At the end of
this paragraph I put the following
\begin{runninglinenumbers}
\renewcommand\makeLineNumber
   {\hss$\rightarrow$\ \rlap{\hskip\textwidth\ $\leftarrow$}}
\end{runninglinenumbers}
\begin{quote}
  ~\begin{runninglinenumbers}~\\
  ~\renewcommand\makeLineNumber~\\   
  ~  {\hss$\rightarrow$\ \rlap{\hskip\textwidth\ $\leftarrow$}}~\\
  ~\end{runninglinenumbers}~\\
\end{quote}

Redefining ~\makeLineNumber~ cuts deep into the linenumber mode
setting.  If you still want to use the basic modes \emph{running} and
\emph{pagewise} you should go one level up and modify one of the
following macros, which are called by ~\makeLineNumber~ depending on the
current mode, and with the counter ~{linenumber}~ allready adjusted
when using \emph{pagewise} mode.
\begin{quote}\obeylines
  ~\makeLineNumberRunning~
  ~\makeLineNumberOdd~
  ~\makeLineNumberEven~
\end{quote}
The first is used in \emph{running} mode, the other two in
\emph{pagewise} mode.  If you modify those, you cut into the
margin selection mechanism as advertised above.  You will have to call
a mode selection command after changing these macros, to make them take
effect (at least for ~\makeLineNumberRunning~).  

You can go up one more step.  The margin selection commands redefine
the above macros by making them equivalent (~\let~) to one of the
following macros
\begin{quote}
  ~\makeLineNumberLeft~
  ~\makeLineNumberRight~
\end{quote}
You may redefine these, and issue a margin selection command followed
by a mode selection command to use them.  The default definitions are
\begin{quote}
  ~\def\makeLineNumberLeft~\\
  ~  {\hss\linenumberfont\LineNumber\hskip\linenumbersep}~
\end{quote}
and
\begin{quote}
  ~\def\makeLineNumberRight~\\
  ~  {\linenumberfont\hskip\linenumbersep\hskip\textwidth~\\
  ~    \hbox to\linenumberwidth{\hss\LineNumber}\hss}~
\end{quote}
Whatever you do, use ~\LineNumber~ to print the digits.  This ensures
that the modulo mode setting is acknowledged.  If you want to
customize that as well, this is the macro to change.  ~\LineNumber~
eventually refers to ~\thelinenumber~, which is the place to customize
the numerals themselves.  For the rest of this section I said
\renewcommand\LineNumber{\ifodd\value{linenumber} \thelinenumber)\fi}
\begin{quote}
   ~\renewcommand\LineNumber~\\
   ~   {\ifodd\value{linenumber} \thelinenumber)\fi}~
\end{quote}

\end{pagewiselinenumbers}

\begin{linenumbers*}

\section{Extension packages}

\subsection{Display math, \texttt{\itshape mlineno.sty}}

\lineno.sty does not work well with display math.  The parts of a
paragraph preceeding a display math will not get line numbers.  The
reason is that the paragraph is not finished, but the part above the
display is broken into lines anyway.

Let me demonstrate the effect.  This paragraph contains a
~{displaymath}~ environment.  The part before the Formula does not get
line numbers.  Here comes the Formula
\begin{displaymath}
    \mathrm{6\,H_2O + 6\,CO_2 \rightarrow C_6H_{12}O_6 + 6\,O_2}
\end{displaymath}
which makes the line numbers disappear.  The trailing part of the
paragraph does get line numbers.  

There are several means to solve the problem, but none of them is
fully satisfactory.  \lineno.sty defines a ~{linenomath}~ environment,
which can be wrapped around a display math to make the line numbering
work.  This will work with any kind of display math, even if you use
explicit ~$$~ pairs.  There is a ~*~-form ~{linenomath*}~ which also
numbers the lines of the display itself, as good as it can.  Here
comes an example use of ~{linenomath*}~
\begin{linenomath*}
\begin{eqnarray*}
  b_1 &=& a_{11}x_1 + a_{12}x_2 \\
  b_2 &=& a_{21}x_1 + a_{22}x_2   
\end{eqnarray*}
\end{linenomath*}
wrapping an ~{egnarray*}~ like this
\begin{quote}
  ~\begin{linenomath*}~\\
  ~  \begin{eqnarray*}~\\
  ~    b_1 &=& a_{11}x_1 + a_{12}x_2 \\~\\
  ~    b_2 &=& a_{21}x_1 + a_{22}x_2~\\   
  ~  \end{eqnarray*}~\\
  ~\end{linenomath*}~
\end{quote}
Specifying the package option ~[displaymath]~, causes the
~{linenomath}~ environment to switch its function with its *-form.
This allows you to later decide if you want the numbers on the formulas
or not, without putting in stars everywhere (as long as you were
consistent).

The ~{linenomath}~ wrapper does nothing if line numbering is not
activated.  You do not need to remove them if you decide to omit the
line numbering later (although you still have to load \lineno.sty).

There is an extension to \lineno.sty, called \texttt{\itshape
  mlineno.sty}, which redefines the standard \LaTeX\ display math
environments to wrap themselves automatically into ~{linenomath}~.
You can load \texttt{\itshape mlineno.sty} instead or in addition to
\lineno.sty, and you can keep existing explicit ~{linenomath}~ wrappers
without harm.  It will not work with AMSmath.

Other solutions to make \lineno.sty work with display math are either
ugly or less stable.  The ugly possibility is to precede every display
math with an empty line, or with
\begin{quote}
  ~{\par\nobreak\noindent}~
\end{quote}
but this gains you nothing compared to using the ~{linenomath}~
environment, since you still have to modify your document.

The only way to get line numbers with display math without changing
the document proved to be unstable.  At the end of the file
~mlineno.sty~ you can find how it can be done, but only if you are
desperate.  It works by modifying some \TeX\ parameters permanently,
instead of restricting the change to the execution of the line
breaking algorithm.

\end{linenumbers*}

\subsection{\texttt{\itshape numquote.sty}}

This extension to \lineno.sty defines two environments, each of them
with a *-form or alternatively an optional argument.
\begin{quote}\obeylines
  ~\begin{numquote}~
  ~\end{numquote}~
\end{quote}
is like ~{quote}~,
\begin{quote}\obeylines
  ~\begin{numquotation}~
  ~\end{numquotation}~
\end{quote}
is like ~{quotation}~, but with the lines numbered.  Numbering
restarts with 1 each time it is used, except you use the *-form, or
specify the line number to start with in an optional argument.
\begin{numquote}
The line numbers set to the left of the text, indented by the same
amount as the quote or quotation.  This works as expected even if the
quote appears in a nested list. 
\end{numquote}
To customize the distance and appearance you can modify
~\quotelinenumbersep~ and ~\quotelinenumberfont~ respectively.

This package accepts one option ~[*]~, which causes both
environments to switch function with their *-forms.  All other options
are passed to \lineno.sty, which is automatically loaded.

\subsection{\texttt{\itshape ilineno.sty}}
\label{sec:ilineno}

\noindent
\parbox\textwidth{
  \internallinenumbers
  \resetlinenumber[13]
  Sometimes you need line numbers within a |\parbox or figure.  This
  extension to \lineno.sty can do that, it the text is simple enough.
  It works by drawing a ladder of numbers next to the paragraph, each
  number separated by |\baselineskip from the other.  This obviously
  dose not work nicely with anything but straight text.  Extra high
  lines (like this: $\displaystyle x=\frac AB$) will disturb the
  alignment.  The power of \lineno.sty is not necessary to achieve
  this, but you may need both in one document with a somewhat
  coherent interface, and some of the necessary infrastructure from
  \lineno.sty is actually useful.}

The preceding paragraph was set like this:
\begin{quote}
  ~\noindent~ \\
  ~\parbox\textwidth{~ \\
    ~\internallinenumbers~ \\
    ~\resetlinenumber[13]~ \\
    ~ ~ Sometimes you need \dots ~}~
\end{quote}


\subsection{\texttt{\itshape bframe.sty}}
\label{sec:bframe}

\setlength\bframesep{10pt}
\begin{bframe}
\lineno.sty can be used for unexpected purposes.  \texttt{\itshape
  bframe.sty} defines an environment 
\begin{quote}\obeylines
  ~\begin{bframe}~
  ~\end{bframe}~
\end{quote}
that draws boxes around some text, even across page breaks.

The current version is very preliminary.  

At a page break, the box is open.  (The \emph{pagewise} mode could be
used to close the boxes at page breaks.)  There are two parameters:
\begin{description}
\item [|\bframesep] \leavevmode\\
  defines the separation of the box from the text.
\item [|\bframerule] \leavevmode\\
  defines the thickness of the lines around the text.
\end{description}

It works by making \lineno.sty drawing small rules left and right to
the lines.  The height of the rules is ~\baselineskip~ plus
~\bframesep~. This leaves some extra space for extra high lines.

In a future version there will be a possibility to move the vertical
lines inwards for indented text.  The box will optionally be closed at
page breaks.  It will not likely be possible to have a colored
background in the box, at least not with a graphics driver that cannot
put a background behind existing foreground (Postscript cannot, I've
been told).  

\end{bframe}

\section{How to print the documented source}

\lineno.sty is written in three programming languages: \TeX, [c]sh,
and awk.

The file can be loaded as a \LaTeXe\ package as it is.  However, if
you feed it into a Unix shell, like
\begin{quote}
   ~csh>  source ./lineno.sty~
\end{quote}
it will produce the files ~lineno.tex~ and ~lineno.dvi~, which is the
documented source of \lineno.sty.  If you want to learn how it works,
or you need to adapt \lineno.sty for some special requirements, you
should read this document.

\end{document}
