\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{itemrule}[1998/03/20 
                           Draw a rule in the margin of an itemize]
%
% $Id: itemrule.sty,v 3.0 1999/06/11 22:40:46 stephan Exp $
%
% This works only for plain text paragraphs, without special height
% lines. The lines must be about \baselineskip apart, no display
% math. 
%
% (c) Stephan I. B"ottcher
%

\DeclareOption*{\PassOptionsToPackage{\CurrentOption}{lineno}}
\ProcessOptions*
\RequirePackage{lineno}

\newdimen\itemrulewidth\itemrulewidth=1pt
\newcount\c@itemrulelinenumber

\newcommand\itemrule[1][itemize]
  {\csname#1\endcsname
   \advance\itemsep\parsep
   \advance\@topsep-\parsep
   \parskip\z@
   \parindent20\p@
   \runninglinenumbers
   \let\c@linenumber\c@itemrulelinenumber
   \c@linenumber1\relax
   \let\IR@makelabel\makelabel
   \def\makelabel{\global\c@linenumber\z@\IR@makelabel}%
   \def\makeLineNumber{\ifnum\c@linenumber=0\else
        \setbox\z@\hbox{\@itemlabel}%
        \@tempdima\@totalleftmargin
        \advance\@tempdima-0.5\wd\z@
        \advance\@tempdima-0.5\itemrulewidth
        \advance\@tempdima-\labelsep
        \hskip\@tempdima
        \@tempdima.8\baselineskip
        \ifnum\c@linenumber>1\else\@tempdima\ht\strutbox\fi
        \vrule\@width\itemrulewidth\@height\@tempdima\@depth.2\baselineskip
     \fi\hss}%
   \ignorespaces
  }
\let\enditemrule=\endlist

